# ðŸ”§ P4-008: Implement SpecKitStrategy - progress.md Generation [serial]

> **Parent**: #TBD
> **Labels**: `phase-4a`, `priority-high`, `serial`, `copilot-suitable`, `mcp-serena`
> **Milestone**: M5: Spec-Kit Core
> **Estimate**: 3 hours
> **Depends On**: P4-007
> **Blocks**: P4-009, P4-017

## Context

The progress.md document tracks implementation progress, blockers, and next steps.

## Task Description

Implement progress.md generation:

**Add to `src/strategies/speckit-strategy.ts`:**
```typescript
private renderProgress(result: any): OutputDocument {
  const progress = this.extractProgress(result);

  const statusEmoji = {
    'on-track': 'ðŸŸ¢',
    'at-risk': 'ðŸŸ¡',
    'blocked': 'ðŸ”´',
    'completed': 'âœ…',
  };

  const content = `# Progress

## Status: ${statusEmoji[progress.status]} ${progress.status.toUpperCase()}

**Last Updated**: ${progress.lastUpdated.toISOString().split('T')[0]}

## Summary

| Metric | Value |
|--------|-------|
| Completion | ${progress.completionPercentage}% |
| Tasks Completed | ${progress.tasksCompleted}/${progress.totalTasks} |
| Status | ${progress.status} |

## Progress Bar

\`\`\`
[${'â–ˆ'.repeat(Math.floor(progress.completionPercentage / 5))}${'â–‘'.repeat(20 - Math.floor(progress.completionPercentage / 5))}] ${progress.completionPercentage}%
\`\`\`

## Recent Updates

${progress.recentUpdates.map(u => `### ${u.date.toISOString().split('T')[0]}

${u.description}

**Tasks Completed**:
${u.tasksCompleted.map(t => `- ${t}`).join('\n')}
`).join('\n')}

${progress.blockers.length > 0 ? `## Blockers

${progress.blockers.map(b => `### ${b.id}: ${b.description}

- **Severity**: ${b.severity}
- **Owner**: ${b.owner ?? 'Unassigned'}
`).join('\n')}` : ''}

## Next Steps

${progress.nextSteps.map((step, i) => `${i + 1}. ${step}`).join('\n')}

---
*Generated by SpecKitStrategy*
`;

  return {
    name: 'progress.md',
    content,
    format: 'markdown',
  };
}

private extractProgress(result: any): Progress {
  // Initialize with default values for new spec
  return {
    status: 'on-track',
    completionPercentage: 0,
    tasksCompleted: 0,
    totalTasks: this.deriveTasksFromSpec(this.extractSpec(result)).length,
    recentUpdates: [
      {
        date: new Date(),
        description: 'Spec-Kit initialized',
        tasksCompleted: [],
      },
    ],
    blockers: [],
    nextSteps: [
      'Review spec.md for completeness',
      'Assign tasks to team members',
      'Begin Phase 1 implementation',
    ],
    lastUpdated: new Date(),
  };
}
```

## Acceptance Criteria

- [ ] `renderProgress()` method implemented
- [ ] Status indicator with emoji
- [ ] Summary metrics table
- [ ] Progress bar visualization
- [ ] Recent updates section
- [ ] Blockers section (if any)
- [ ] Next steps section
- [ ] Timestamp formatting
- [ ] Unit tests

## Files to Modify

- `src/strategies/speckit-strategy.ts`
- `tests/vitest/strategies/speckit-strategy.spec.ts`

## Verification

```bash
npm run build && npm run test:vitest -- speckit-strategy
```

## References

- [SPEC-005: Spec-Kit Integration](https://github.com/Anselmoo/mcp-ai-agent-guidelines/blob/development/plan-v0.13.x/specs/SPEC-005-speckit-integration.md)
- [TASKS Phase 4](https://github.com/Anselmoo/mcp-ai-agent-guidelines/blob/development/plan-v0.13.x/tasks/TASKS-phase-4-speckit-integration.md) P4-008
